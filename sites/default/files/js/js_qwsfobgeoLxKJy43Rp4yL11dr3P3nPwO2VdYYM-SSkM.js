(function($,Drupal,drupalSettings){Drupal.behaviors.ViewsAjaxView={};Drupal.behaviors.ViewsAjaxView.attach=function(context,settings){if(settings&&settings.views&&settings.views.ajaxViews){var ajaxViews=settings.views.ajaxViews;Object.keys(ajaxViews||{}).forEach(function(i){Drupal.views.instances[i]=new Drupal.views.ajaxView(ajaxViews[i])})}};Drupal.behaviors.ViewsAjaxView.detach=function(context,settings,trigger){if(trigger==='unload')if(settings&&settings.views&&settings.views.ajaxViews){var ajaxViews=settings.views.ajaxViews;Object.keys(ajaxViews||{}).forEach(function(i){var selector='.js-view-dom-id-'+ajaxViews[i].view_dom_id;if($(selector,context).length){delete Drupal.views.instances[i];delete settings.views.ajaxViews[i]}})}};Drupal.views={};Drupal.views.instances={};Drupal.views.ajaxView=function(settings){var selector='.js-view-dom-id-'+settings.view_dom_id;this.$view=$(selector);var ajaxPath=drupalSettings.views.ajax_path;if(ajaxPath.constructor.toString().indexOf('Array')!==-1)ajaxPath=ajaxPath[0];var queryString=window.location.search||'';if(queryString!==''){queryString=queryString.slice(1).replace(/q=[^&]+&?|&?render=[^&]+/,'');if(queryString!=='')queryString=(/\?/.test(ajaxPath)?'&':'?')+queryString};this.element_settings={url:ajaxPath+queryString,submit:settings,setClick:true,event:'click',selector:selector,progress:{type:'fullscreen'}};this.settings=settings;this.$exposed_form=$('form#views-exposed-form-'+settings.view_name.replace(/_/g,'-')+'-'+settings.view_display_id.replace(/_/g,'-'));this.$exposed_form.once('exposed-form').each($.proxy(this.attachExposedFormAjax,this));this.$view.filter($.proxy(this.filterNestedViews,this)).once('ajax-pager').each($.proxy(this.attachPagerAjax,this));var selfSettings=$.extend({},this.element_settings,{event:'RefreshView',base:this.selector,element:this.$view.get(0)});this.refreshViewAjax=Drupal.ajax(selfSettings)};Drupal.views.ajaxView.prototype.attachExposedFormAjax=function(){var that=this;this.exposedFormAjax=[];$('input[type=submit], input[type=image]',this.$exposed_form).not('[data-drupal-selector=edit-reset]').each(function(index){var selfSettings=$.extend({},that.element_settings,{base:$(this).attr('id'),element:this});that.exposedFormAjax[index]=Drupal.ajax(selfSettings)})};Drupal.views.ajaxView.prototype.filterNestedViews=function(){return!this.$view.parents('.view').length};Drupal.views.ajaxView.prototype.attachPagerAjax=function(){this.$view.find('ul.js-pager__items > li > a, th.views-field a, .attachment .views-summary a').each($.proxy(this.attachPagerLinkAjax,this))};Drupal.views.ajaxView.prototype.attachPagerLinkAjax=function(id,link){var $link=$(link),viewData={},href=$link.attr('href');$.extend(viewData,this.settings,Drupal.Views.parseQueryString(href),Drupal.Views.parseViewArgs(href,this.settings.view_base_path));var selfSettings=$.extend({},this.element_settings,{submit:viewData,base:false,element:link});this.pagerAjax=Drupal.ajax(selfSettings)};Drupal.AjaxCommands.prototype.viewsScrollTop=function(ajax,response){var offset=$(response.selector).offset(),scrollTarget=response.selector;while($(scrollTarget).scrollTop()===0&&$(scrollTarget).parent())scrollTarget=$(scrollTarget).parent();if(offset.top-10<$(scrollTarget).scrollTop())$(scrollTarget).animate({scrollTop:offset.top-10},500)}})(jQuery,Drupal,drupalSettings);
(function($,Drupal){'use strict';Drupal.views.ajaxView.prototype.attachExposedFormAjax=function(){var that=this;this.exposedFormAjax=[];$('input[type=submit], button[type=submit], input[type=image]',this.$exposed_form).not('[data-drupal-selector=edit-reset]').each(function(index){var selfSettings=$.extend({},that.element_settings,{base:$(this).attr('id'),element:this});that.exposedFormAjax[index]=Drupal.ajax(selfSettings)})}})(jQuery,Drupal);
(function($,Drupal){"use strict";Drupal.behaviors.servicesHomepage={attach:function(context){$(".view-homepage-service-category .views-row .node--type-service-category",context).filter(function(){return $(this).text().toLowerCase().indexOf("experience")>=0}).addClass("active");$(".view-homepage-service-title .views-row .node--type-service-category",context).filter(function(){return $(this).text().toLowerCase().indexOf("experience")>=0}).addClass("active");var $serviceCategoryTitle=$(".node--type-service-category.node--view-mode-page-title h2",context);$serviceCategoryTitle.on("click",function(event){event.preventDefault();event.stopImmediatePropagation();$(".node--type-service-category").removeClass("active");var id=$(this).closest(".node--type-service-category").attr("data-history-node-id");$("[data-history-node-id='"+id+"']").addClass("active");if($(window).width()<=767)$(".homepage-services-left, .homepage-services-right").toggleClass("closed")});$serviceCategoryTitle.mouseover(function(){var id=$(this).closest(".node--type-service-category").attr("data-history-node-id");$("[data-history-node-id='"+id+"']").addClass("is-hover")}).mouseleave(function(){var id=$(this).closest(".node--type-service-category").attr("data-history-node-id");setTimeout(function(){$("[data-history-node-id='"+id+"']").removeClass("is-hover")},100)});$(".homepage-services-right .services-close-icon",context).on("click",function(event){event.stopImmediatePropagation();$(".homepage-services-left, .homepage-services-right",context).toggleClass("closed")})}}})(jQuery,Drupal);
(function($){"use strict";$.fn.mobileMenu=function(options){var settings=$.extend({targetWrapper:'.navbar-we-mega-menu',accordionMenu:'true',toggledClass:'toggled',pageSelector:'body'},options);if($(window).width()<=991)$(settings.targetWrapper).addClass('mobile-main-menu');var toggleButton=this;$(window).resize(function(){if($(window).width()<=991){$(settings.targetWrapper).addClass('mobile-main-menu')}else{$(settings.targetWrapper).removeClass('mobile-main-menu');$('body').css('overflow','');$('body').css('height','');$('body').css('position','');$(settings.pageSelector).removeClass(settings.toggledClass);$(settings.pageSelector).find('.overlay').remove();$(settings.pageSelector).css('position','');item.removeClass('open');item.find('ul').css('display','')}})
function _weMegaMenuClear(){var wrapper=$(settings.pageSelector),overlay=wrapper.find('.overlay');overlay.remove();wrapper.css({width:'',position:''});wrapper.removeClass(settings.toggledClass);wrapper.find('div.region-we-mega-menu nav').removeClass('we-mobile-megamenu-active');if(overlay.length>0){wrapper.find('.btn-close').remove();overlay.remove();$('body').css('overflow','');$('body').css('height','');$('body').css('position','')}};this.off('click.mobileMenu');this.on('click.mobileMenu',function(e){var targetWrapper=$(this).closest('div.region-we-mega-menu').find('nav.navbar-we-mega-menu'),wrapper=$(settings.pageSelector);if(!wrapper.hasClass(settings.toggledClass)){wrapper.addClass(settings.toggledClass).css('position','relative');$(settings.targetWrapper).addClass('mobile-main-menu');targetWrapper.addClass('we-mobile-megamenu-active');if(wrapper.find('.overlay').length==0){var overlay=$('<div class="overlay"></div>');overlay.prependTo(wrapper);overlay.click(function(){_weMegaMenuClear()});$('body').css('overflow','hidden');$('body').css('btn-close','hidden');$('body').css('height','100%');$('body').css('position','relative')};if(wrapper.find('.btn-close').length==0){var btnClose=$('<span class="btn-close"></span>');btnClose.prependTo(wrapper);$('.btn-close').on('click',function(e){_weMegaMenuClear();e.preventDefault();return false})}}else _weMegaMenuClear();e.preventDefault();e.stopPropagation()});if(settings.accordionMenu=='true'){var targetWrapper=$(this).closest('div.region-we-mega-menu').find('nav.navbar-we-mega-menu'),menu=$(targetWrapper).find('ul.we-mega-menu-ul').first(),item=menu.find('> li[data-submenu=1]'),item_active=menu.find('> li[data-submenu=1].active');if($(window).width()<=991){item_active.addClass('open');item_active.find('> ul').css('display','block')};item.click(function(e){if($(window).width()<=991){var $this=$(this),$sub_menu_inner=$this.find('> .we-mega-menu-submenu');if(!$this.hasClass('open')){$(item).not($this).removeClass('open');item.find('> .we-mega-menu-submenu').slideUp();$this.toggleClass('open');if($this.hasClass('open')){$sub_menu_inner.slideDown();setTimeout(function(){$(targetWrapper).animate({scrollTop:$this.offset().top},700)},500)}else $sub_menu_inner.slideUp();return false}}})}}}(jQuery));
Drupal.WeMegaMenuFrontEnd=Drupal.WeMegaMenuFrontEnd||{};Drupal.WeMegaMenuFrontEnd.mobileThreadHold=1024;Drupal.WeMegaMenuFrontEnd.megamenuActivated=false;(function($,Drupal,drupalSettings){"use strict";Drupal.behaviors.kMegaMenuFrontEndAction={attach:function(context){$(window).on('load',function(){Drupal.WeMegaMenuFrontEnd.init();Drupal.WeMegaMenuFrontEnd.mobileMenu()})}};Drupal.WeMegaMenuFrontEnd.init=function(){if(Drupal.WeMegaMenuFrontEnd.megamenuActivated)return;Drupal.WeMegaMenuFrontEnd.megamenuActivated=true;var megamenu=$('nav.navbar-we-mega-menu');if(megamenu.hasClass('click-action')){megamenu.find('ul li.dropdown-menu > a').click(function(){var li=$(this).closest("li");if(li.hasClass("clicked")){li.closest('ul').find('li').removeClass('clicked');li.closest('.we-mega-menu-row').find('li').removeClass('clicked');li.removeClass("clicked");megamenu.removeClass("has-clicked")}else{li.closest('ul').find('li').removeClass('clicked');li.closest('.we-mega-menu-row').find('li').removeClass('clicked');li.closest("ul").children("li.dropdown-menu").removeClass("clicked");li.addClass("clicked");megamenu.addClass("has-clicked")};if($(window).outerWidth()>Drupal.WeMegaMenuFrontEnd.mobileThreadHold)return false});megamenu.find('ul li.dropdown-menu > a').dblclick(function(){if($(window).outerWidth()>Drupal.WeMegaMenuFrontEnd.mobileThreadHold)window.location.href=$(this).attr("href")});megamenu.click(function(event){event.stopPropagation()});$("body").click(function(){megamenu.find("ul li.dropdown-menu.clicked").removeClass('clicked');megamenu.removeClass("has-clicked")})}};Drupal.WeMegaMenuFrontEnd.mobileMenu=function(){$('div.region-we-mega-menu a.navbar-toggle').mobileMenu()}})(jQuery,Drupal,drupalSettings);
